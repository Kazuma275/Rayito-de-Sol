<template>
  <div class="terms-container">
    <div class="terms-header">
      <h1 class="terms-title">Términos y Condiciones</h1>
      <p class="terms-subtitle">Rayito de Sol - Plataforma de Gestión de Propiedades</p>
    </div>
    
    <div class="terms-content">
      <div class="terms-section">
        <h2>1. Términos de Servicio</h2>
        <p>
          Al utilizar nuestra plataforma, usted acepta cumplir con estos términos y condiciones. 
          Rayito de Sol proporciona una plataforma para que los propietarios gestionen sus propiedades 
          y reservas. Nos reservamos el derecho de modificar estos términos en cualquier momento.
        </p>
        <p>
          El uso de nuestros servicios implica la aceptación total de estos términos. Si no está de 
          acuerdo con alguna parte de estos términos, no debe utilizar nuestros servicios.
        </p>
      </div>
      
      <div class="terms-section">
        <h2>2. Política de Cancelación</h2>
        <p>Ofrecemos diferentes políticas de cancelación para adaptarse a sus necesidades:</p>
        
        <div class="policy-options">
          <div class="policy-item">
            <div class="policy-header">
              <h3>Flexible</h3>
              <span class="policy-badge flexible">Recomendada</span>
            </div>
            <p>Reembolso completo si se cancela 24 horas antes de la llegada.</p>
            <ul>
              <li>Cancelación gratuita hasta 24 horas antes</li>
              <li>Ideal para huéspedes indecisos</li>
              <li>Mayor tasa de ocupación</li>
            </ul>
          </div>
          
          <div class="policy-item">
            <div class="policy-header">
              <h3>Moderada</h3>
              <span class="policy-badge moderate">Equilibrada</span>
            </div>
            <p>Reembolso del 50% si se cancela 5 días antes de la llegada.</p>
            <ul>
              <li>Cancelación con 50% de reembolso hasta 5 días antes</li>
              <li>Balance entre flexibilidad y protección</li>
              <li>Política más común en el mercado</li>
            </ul>
          </div>
          
          <div class="policy-item">
            <div class="policy-header">
              <h3>Estricta</h3>
              <span class="policy-badge strict">Protección</span>
            </div>
            <p>Reembolso del 50% si se cancela 7 días antes de la llegada.</p>
            <ul>
              <li>Cancelación con 50% de reembolso hasta 7 días antes</li>
              <li>Mayor protección para el propietario</li>
              <li>Recomendada para propiedades premium</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="terms-section">
        <h2>3. Normas de la Casa</h2>
        <p>
          Las normas de la casa son esenciales para mantener un ambiente seguro y cómodo para todos. 
          Como propietario, puedes establecer las siguientes normas comunes:
        </p>
        
        <div class="house-rules-list">
          <div class="rule-category">
            <h4>Normas Básicas</h4>
            <ul>
              <li>No se permiten mascotas (salvo excepciones acordadas)</li>
              <li>Prohibido fumar en el interior de la propiedad</li>
              <li>No se permiten fiestas o eventos ruidosos</li>
              <li>Respeto por los vecinos y la comunidad</li>
            </ul>
          </div>
          
          <div class="rule-category">
            <h4>Horarios</h4>
            <ul>
              <li>Hora de llegada: 14:00 - 20:00</li>
              <li>Hora de salida: antes de las 12:00</li>
              <li>Horario de silencio: 22:00 - 08:00</li>
            </ul>
          </div>
          
          <div class="rule-category">
            <h4>Capacidad y Seguridad</h4>
            <ul>
              <li>Número máximo de huéspedes según capacidad</li>
              <li>Uso responsable de las instalaciones</li>
              <li>Mantener la propiedad limpia y ordenada</li>
              <li>Reportar cualquier daño inmediatamente</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="terms-section">
        <h2>4. Política de Privacidad</h2>
        <p>
          Rayito de Sol respeta su privacidad y se compromete a proteger sus datos personales. 
          Esta política explica cómo recopilamos, utilizamos y protegemos su información.
        </p>
        
        <div class="privacy-points">
          <div class="privacy-item">
            <h4>Recopilación de Datos</h4>
            <p>
              Recopilamos información necesaria para proporcionar nuestros servicios, incluyendo 
              datos de contacto, información de pago y preferencias de usuario.
            </p>
          </div>
          
          <div class="privacy-item">
            <h4>Uso de la Información</h4>
            <p>
              Utilizamos sus datos para mejorar nuestros servicios, procesar reservas, 
              comunicarnos con usted y personalizar su experiencia.
            </p>
          </div>
          
          <div class="privacy-item">
            <h4>Protección de Datos</h4>
            <p>
              Implementamos medidas de seguridad técnicas y organizativas para proteger 
              sus datos contra acceso no autorizado, pérdida o alteración.
            </p>
          </div>
          
          <div class="privacy-item">
            <h4>Compartir Información</h4>
            <p>
              No compartimos sus datos personales con terceros sin su consentimiento explícito, 
              excepto cuando sea requerido por ley o para proporcionar nuestros servicios.
            </p>
          </div>
        </div>
      </div>
      
      <div class="terms-section">
        <h2>5. Responsabilidades</h2>
        
        <div class="responsibilities">
          <div class="responsibility-item">
            <h4>Del Propietario</h4>
            <ul>
              <li>Proporcionar información precisa sobre la propiedad</li>
              <li>Mantener la propiedad en condiciones habitables</li>
              <li>Responder a las consultas de manera oportuna</li>
              <li>Cumplir con las leyes locales de alquiler</li>
            </ul>
          </div>
          
          <div class="responsibility-item">
            <h4>Del Huésped</h4>
            <ul>
              <li>Proporcionar información precisa al reservar</li>
              <li>Respetar las normas de la casa</li>
              <li>Cuidar la propiedad como si fuera propia</li>
              <li>Comunicar cualquier problema inmediatamente</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="terms-section">
        <h2>6. Contacto</h2>
        <p>
          Si tiene preguntas sobre estos términos y condiciones, puede contactarnos a través de:
        </p>
        <div class="contact-info">
          <p><strong>Email:</strong> soporte@rayitodesol.com</p>
          <p><strong>Teléfono:</strong> +34 900 123 456</p>
          <p><strong>Dirección:</strong> Calle del Sol, 123, 28001 Madrid, España</p>
        </div>
      </div>
      
      <div class="terms-footer">
        <div class="terms-checkbox">
          <input 
            type="checkbox" 
            id="accept-terms" 
            v-model="termsAccepted" 
            @change="saveTermsAcceptance"
            class="terms-checkbox-input"
          />
          <label for="accept-terms" class="terms-checkbox-label">
            He leído y acepto los términos y condiciones
          </label>
        </div>
        <p class="last-updated">Última actualización: {{ new Date().toLocaleDateString('es-ES') }}</p>
        <div class="footer-actions">
          <button class="btn-back" @click="goBack">
            <ArrowLeftIcon class="btn-icon" />
            Volver
          </button>
          <button 
            class="btn-accept" 
            @click="acceptTerms" 
            :disabled="!termsAccepted"
          >
            <CheckIcon class="btn-icon" />
            Aceptar Términos
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { useRouter } from 'vue-router';
import { useToast } from 'vue-toastification';
import { ArrowLeftIcon, CheckIcon } from 'lucide-vue-next';

const router = useRouter();
const toast = useToast();
const termsAccepted = ref(false);

// Cargar el estado de aceptación de términos desde localStorage al montar el componente
onMounted(() => {
  const savedAcceptance = localStorage.getItem('termsAccepted');
  if (savedAcceptance === 'true') {
    termsAccepted.value = true;
  }
});

const saveTermsAcceptance = () => {
  localStorage.setItem('termsAccepted', termsAccepted.value);
};

const goBack = () => {
  router.go(-1);
};

const acceptTerms = () => {
  if (termsAccepted.value) {
    // Guardar en localStorage que el usuario aceptó los términos
    localStorage.setItem('termsAccepted', 'true');
    
    // Mostrar notificación de éxito
    toast.success("¡Términos aceptados correctamente!", {
      timeout: 3000,
      position: "top-right",
      closeOnClick: true,
      pauseOnHover: true,
      draggable: true,
    });
    
    // Redirigir al registro
    router.push('/register');
  } else {
    // Mostrar notificación de error
    toast.error("Debes aceptar los términos para continuar", {
      timeout: 3000,
      position: "top-right",
      closeOnClick: true,
      pauseOnHover: true,
      draggable: true,
    });
  }
};
</script>

<style scoped>
.terms-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem;
  background: white;
  min-height: 100vh;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
  border-radius: 16px;
}

.terms-header {
  text-align: center;
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 3px solid #f1f5f9;
  position: relative;
}

.terms-header::after {
  content: '';
  position: absolute;
  bottom: -3px;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 3px;
  background: linear-gradient(90deg, #0071c2, #fbbf24);
}

.terms-title {
  font-size: 2.5rem;
  font-weight: 800;
  color: #0071c2;
  margin: 0 0 1rem 0;
  text-shadow: 0 2px 4px rgba(0, 113, 194, 0.1);
}

.terms-subtitle {
  font-size: 1.2rem;
  color: #64748b;
  margin: 0;
}

.terms-content {
  display: flex;
  flex-direction: column;
  gap: 3rem;
}

.terms-section {
  padding-bottom: 2rem;
  border-bottom: 1px solid #e2e8f0;
  animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.terms-section:last-child {
  border-bottom: none;
}

.terms-section h2 {
  font-size: 1.5rem;
  font-weight: 700;
  color: #1e293b;
  margin: 0 0 1.5rem 0;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #0071c2;
  display: inline-block;
}

.terms-section h3 {
  font-size: 1.2rem;
  font-weight: 600;
  color: #374151;
  margin: 0 0 0.5rem 0;
}

.terms-section h4 {
  font-size: 1.1rem;
  font-weight: 600;
  color: #475569;
  margin: 0 0 0.75rem 0;
}

.terms-section p {
  line-height: 1.7;
  color: #4b5563;
  margin: 0 0 1rem 0;
}

.terms-section ul {
  margin: 0 0 1rem 1.5rem;
  padding: 0;
}

.terms-section li {
  line-height: 1.6;
  color: #4b5563;
  margin-bottom: 0.5rem;
}

.policy-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;
}

.policy-item {
  background: #f8fafc;
  border: 2px solid #e2e8f0;
  border-radius: 12px;
  padding: 1.5rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.policy-item:hover {
  border-color: #0071c2;
  box-shadow: 0 8px 15px rgba(0, 113, 194, 0.1);
  transform: translateY(-3px);
}

.policy-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.policy-badge {
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.policy-badge.flexible {
  background: #dcfce7;
  color: #166534;
}

.policy-badge.moderate {
  background: #fef3c7;
  color: #92400e;
}

.policy-badge.strict {
  background: #fee2e2;
  color: #991b1b;
}

.house-rules-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
  margin-top: 1.5rem;
}

.rule-category {
  background: #f8fafc;
  padding: 1.5rem;
  border-radius: 8px;
  border-left: 4px solid #fbbf24;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
}

.rule-category:hover {
  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.privacy-points {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;
}

.privacy-item {
  background: #f1f5f9;
  padding: 1.5rem;
  border-radius: 8px;
  border-left: 4px solid #0071c2;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
}

.privacy-item:hover {
  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.responsibilities {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 1.5rem;
}

.responsibility-item {
  background: #f8fafc;
  padding: 1.5rem;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
}

.responsibility-item:hover {
  border-color: #0071c2;
  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.contact-info {
  background: #f1f5f9;
  padding: 1.5rem;
  border-radius: 8px;
  margin-top: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.contact-info p {
  margin: 0 0 0.5rem 0;
}

.terms-footer {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 2px solid #e2e8f0;
  text-align: center;
}

.terms-checkbox {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 1.5rem;
  gap: 0.75rem;
}

.terms-checkbox-input {
  width: 20px;
  height: 20px;
  accent-color: #0071c2;
  cursor: pointer;
}

.terms-checkbox-label {
  font-weight: 500;
  color: #374151;
  cursor: pointer;
}

.last-updated {
  color: #64748b;
  font-style: italic;
  margin-bottom: 2rem;
}

.footer-actions {
  display: flex;
  justify-content: center;
  gap: 1rem;
}

.btn-back, .btn-accept {
  padding: 0.75rem 2rem;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  border: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.btn-icon {
  width: 18px;
  height: 18px;
}

.btn-back {
  background: #f1f5f9;
  color: #475569;
  border: 2px solid #e2e8f0;
}

.btn-back:hover {
  background: #e2e8f0;
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
}

.btn-accept {
  background: linear-gradient(135deg, #0071c2, #3ab5f6);
  color: white;
}

.btn-accept:hover:not(:disabled) {
  background: linear-gradient(135deg, #005999, #188cd6);
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 113, 194, 0.3);
}

.btn-accept:disabled {
  background: #cbd5e1;
  color: #94a3b8;
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* Responsive */
@media (max-width: 768px) {
  .terms-container {
    padding: 1.5rem;
    border-radius: 0;
    box-shadow: none;
  }
  
  .terms-title {
    font-size: 2rem;
  }
  
  .policy-options,
  .house-rules-list,
  .privacy-points,
  .responsibilities {
    grid-template-columns: 1fr;
  }
  
  .footer-actions {
    flex-direction: column;
  }
  
  .btn-back, .btn-accept {
    width: 100%;
    justify-content: center;
  }
}
</style>